HTML Catalog Parser

html_parser_parser.py — модуль для парсинга HTML-страниц каталога товаров.
Функция собирает карточки товаров, разделяет название детали и модель автомобиля, динамически извлекает характеристики.

Функция parse_catalog_page
parse_catalog_page(html: str, existing_keys: set = None) -> tuple[list[dict], set]

Параметры:

html — строка с HTML-кодом страницы каталога.

existing_keys — множество ключей характеристик, если нужно сохранить уже известные поля. По умолчанию None.

Возвращает:

items — список словарей, каждый словарь содержит:

title — название детали (на кириллице)

car_model — модель автомобиля (начиная с латиницы или цифр)

price — цена

link — ссылка на товар

sku — артикул

image — ссылка на изображение

дополнительные характеристики из таблицы <th> - <td>

all_keys — множество всех уникальных ключей характеристик, найденных на странице.

Особенности:

Автоматически разделяет title на название детали и модель автомобиля, корректно обрабатывая скобки (ГУР), (8P) и др.

Динамически собирает все характеристики из таблицы <th> - <td> для каждой карточки товара.

Добавляет отсутствующие ключи со значением None, чтобы структура данных была одинаковой для всех товаров.

Пример использования:
from html_parser_parser import parse_catalog_page
from pathlib import Path

html = Path("catalog_page.html").read_text(encoding="utf-8")
items, keys = parse_catalog_page(html)

for item in items:
    print(item)